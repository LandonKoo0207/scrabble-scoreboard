<h2>Turn <%= @scrabble.current_turn %>: Enter a New Word, <%= @player.name %></h2>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<div class="container">
<%= form_for ([@scrabble, @player, @player.words.build]) do |f| %>
  <div class="form-group row">
    <div class="new-word-input-label">
    </div>
    <div class="word-input-letters">
    <% for id in 1..15 do %>
      <input type="text" id="<%= id %>" class="word-char" maxlength="1" autofocus="true">
    <% end %>
    </div>
  </div>
  
  <div class="form-group row">
    <div class="new-word-input-label">
      Double Letter:
    </div>
    <div class="double-letter-check">
    <% for id in 1..15 do %>
      <%= f.check_box :double_letter, { multiple: true, id: "double-letter-checkbox" }, id, nil %>
    <% end %>
    </div>
  </div>
  <div class="form-group row">
    <div class="new-word-input-label">
      Triple Letter:
    </div>
    <div class="triple-letter-check">
    <% for id in 1..15 do %>
      <%= f.check_box :triple_letter, { multiple: true, id: "triple-letter-checkbox" }, id, nil %>
    <% end %>
    </div>
  </div>

  <%= f.text_field :word, style:"text-transform:uppercase", id:"word-input", hidden: "true"  %>
  <div class="row">
    <div class="new-word-input-label">
    </div>
    <div class="double-word-check">
      <%= f.label :double_word, "Double Word" %> <%= f.check_box :double_word, id: "double-word-checkbox" %>
      <span class="checkmark"></span>
    </div>
    <div class="triple-word-check">
      <%= f.label :triple_word, "Triple Word" %> <%= f.check_box :triple_word, id: "triple-word-checkbox" %>
    </div>
  </div>
  <div class="new-word-submit-btn">
    <%= f.submit class:"btn btn-primary", id:"new-word-submit" %>
  </div>
<% end %>
</div>
<hr>
<script>
var word = "";
$("input").keyup(function () {
    var maxLength = $(this).attr('maxlength');

    if($(this).val().length == maxLength) {
        $(this).next().focus();
    }
});

$(".word-char").keyup(function(e) {
  if (e.keyCode == 8) {
      if (this.id != "1") {
        $(this).prev().focus();
      }
  }
});

$("#double-word-checkbox").change(function () {
  if($("#triple-word-checkbox").is(':checked')) {
    $("#triple-word-checkbox").prop('checked', false);
  }
});

$("#triple-word-checkbox").change(function () {
  if($("#double-word-checkbox").is(':checked')) {
      $("#double-word-checkbox").prop('checked', false);
  }
});

$("form").submit(function () {
  word = ""
  for (i = 1; i < 15; i++){
    word += $("#"+i).val();
  }
  $("#word-input").val(word);
});

</script>